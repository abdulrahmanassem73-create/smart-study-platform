/*
Smart Mocking
- ููููุฏ ูุญุชูู ุดุฑุญ ุฃูุงุฏููู "ูุจูุฑ" ููุฑุงู ุจูุงุกู ุนูู ุงุณู ุงูููู
- ุงููุฏู: ุชุฌุฑุจุฉ ุญููุฉ ุจุฏูู API ุญูููู ุงูุขู
*/

export type ExplainMock = {
  title: string;
  markdown: string;
  glossary: Array<{ term: string; definition: string }>;
  keyPoints: string[];
};

function pickSubject(fileName: string) {
  const n = fileName.toLowerCase();
  if (n.includes("calc") || n.includes("ุชูุงุถู") || n.includes("integration") || n.includes("math")) {
    return "ุฑูุงุถูุงุช (ุชูุงุถู ูุชูุงูู)";
  }
  if (n.includes("os") || n.includes("operating") || n.includes("ูุธู ุชุดุบูู")) {
    return "ูุธู ุงูุชุดุบูู";
  }
  if (n.includes("ds") || n.includes("data") || n.includes("ุฎูุงุฑุฒู") || n.includes("algorithm")) {
    return "ููุงูู ุงูุจูุงูุงุช ูุงูุฎูุงุฑุฒููุงุช";
  }
  if (n.includes("network") || n.includes("ุดุจูุงุช")) {
    return "ุดุจูุงุช ุงูุญุงุณุจ";
  }
  if (n.includes("db") || n.includes("database") || n.includes("ููุงุนุฏ")) {
    return "ููุงุนุฏ ุงูุจูุงูุงุช";
  }
  return "ูุงุฏุฉ ุฃูุงุฏูููุฉ";
}

export function generateExplainMock(fileName: string): ExplainMock {
  const subject = pickSubject(fileName);

  const title = `ุดุฑุญ ูุงุฏุฉ: ${fileName}`;

  // Markdown ุบูู: ุฌุฏูู + ููุฏ + LaTeX + Callouts (ุจุงูููุท ุงูุฐู ุณูุณุชูุฏูู ูู render)
  const markdown = `# ${subject}

**ุงููุฏู ูู ูุฐุง ุงูุดุฑุญ:** ุชุญููู ูููู 
**${fileName}** 
ุฅูู ุดุฑุญ ููุธู + ููุงุท ุณุฑูุนุฉ + ูุตุทูุญุงุช ูููุฉ.

> **๐ก ูุนูููุฉ:** ูุฏ ูุธูุฑ ูุฐุง ุงููุญุชูู ูุจุฏูู ุฅุฑุดุงุฏู ุฅุฐุง ูู ุชุชููุฑ ูุชูุฌุฉ ุชุญููู ูุญููุธุฉ ุฃู ุชุนุฐุฑ ุงูุงุชุตุงู. ุนูุฏ ุชููุฑ ุงูุชุญูููุ ุณูุชู ุนุฑุถ ุงููุณุฎุฉ ุงูุฃุญุฏุซ ุชููุงุฆูุงู.

## 1) ุงูููุฑุฉ ุงูุนุงูุฉ
ูู ูุฐุง ุงูุฏุฑุณ ุณูุจูู ููููุง ุนููููุง ููููููู ุงูุฃุณุงุณู ูู **${subject}** ูุน ุฃูุซูุฉ ูุฌุฏุงูู.

> **โ๏ธ ุชูุจูู:** ูู ุงูููู ูุญุชูู ุนูู ุฃูุซุฑ ูู ูุญุงุถุฑุฉุ ุณูููู ูุงุญูุงู ุจุชูุณููู ุชููุงุฆูุงู ุฅูู ูุญุฏุงุช ุตุบูุฑุฉ ูุงุจูุฉ ูููุฐุงูุฑุฉ.

## 2) ุฌุฏูู ูููุฎูุต ุณุฑูุน
| ุงูุนูุตุฑ | ุงููุนูู | ูุซุงู |
|---|---|---|
| ุงูููููู | ุชุนุฑูู ูุฎุชุตุฑ | ูุซุงู ุณุฑูุน |
| ุงููุฏุฎูุงุช | ูุง ุงูุฐู ูุฏุฎูู ูููุธุงู | ููู/ุจูุงูุงุช |
| ุงููุฎุฑุฌุงุช | ูุง ุงูุฐู ูุญุตู ุนููู | ูุชูุฌุฉ/ุชูุฑูุฑ |

## 3) ูุนุงุฏูุงุช (LaTeX)
ุงููุนุงุฏูุงุช ุชูุนุฑุถ ุจุดูู ุณููู:

- ูุนุงุฏูุฉ ุฎุทูุฉ: $y = mx + b$
- ูุดุชูุฉ: $\frac{d}{dx}(x^n) = n x^{n-1}$
- ุชูุงูู ุจุณูุท: $\int_0^1 x^2 dx = \frac{1}{3}$

## 4) ูุซุงู ููุฏ (Code Block)
\`\`\`ts
type Progress = { name: string; value: number }

export function normalize(p: Progress) {
  return { ...p, value: Math.min(100, Math.max(0, p.value)) }
}
\`\`\`

## 5) ุฎุทูุงุช ูุฐุงูุฑุฉ ููุชุฑุญุฉ
- ุงูุฑุฃ ุงูุนูุงููู ุฃููุงู (5 ุฏูุงุฆู)
- ุฑุงุฌุน ุงูุฌุฏูู ุงูููุฎุต (3 ุฏูุงุฆู)
- ุญู ุณุคุงููู ุณุฑูุนูู ููุชุซุจูุช (10 ุฏูุงุฆู)

---

### ุณุคุงู ูุฑุงุฌุนุฉ ุณุฑูุน
- ูุง ุงููุฑู ุจูู *ุงูููููู* ู *ุงููุฏุฎูุงุช* ูู ุงูุฌุฏูู ุฃุนูุงูุ
`;

  const glossary = [
    { term: "ุงููููุฐุฌ (Model)", definition: "ุชูุซูู ูุจุณุท ูููุฑุฉ/ูุธุงู ูุณุงุนุฏ ุนูู ุงูููู ูุงูุชุทุจูู." },
    { term: "ุงููุฏุฎูุงุช (Inputs)", definition: "ุงูุจูุงูุงุช ุงูุชู ุชุฏุฎู ูููุธุงู ููุนุงูุฌูุง." },
    { term: "ุงููุฎุฑุฌุงุช (Outputs)", definition: "ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ุจุนุฏ ุงููุนุงูุฌุฉ." },
    { term: "ุชุทุจูุน (Normalization)", definition: "ุนูููุฉ ุถุจุท ุงูููู ูุชูุน ุถูู ูุทุงู ูุญุฏุฏ." },
  ];

  const keyPoints = [
    `ูุญุชูู ุฅุฑุดุงุฏู ุณุฑูุน ูุจุฏุก ุงููุฐุงูุฑุฉ: ${fileName}`,
    "ุฏุนู ุงูุฌุฏุงูู (GFM) ูุงููุนุงุฏูุงุช (LaTeX) ูุฃููุงุฏ ุงูุจุฑูุฌุฉ",
    "ูุฏุนู ุงูุชุญููู ุงูุญูููู ุนูุฏ ุชููุฑู ูุน ุญูุธ ุงููุชุงุฆุฌ",
  ];

  return { title, markdown, glossary, keyPoints };
}
